<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pokédex Exceeded - Kanto</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #121212;
      color: #f5f5f5;
    }
    header {
      text-align: center;
      padding: 1rem;
      background: #1e1e1e;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    input {
      width: 80%;
      max-width: 400px;
      padding: 0.5rem;
      border-radius: 10px;
      border: none;
      outline: none;
      background: #2b2b2b;
      color: #fff;
      font-size: 1rem;
    }
    .pokedex {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 1rem;
      padding: 1rem;
    }
    .card {
      background: #1e1e1e;
      border-radius: 10px;
      padding: 1rem;
      text-align: center;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .card:hover {
      transform: scale(1.05);
    }
    .types {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      flex-wrap: wrap;
    }
    .type {
      padding: 0.2rem 0.5rem;
      border-radius: 5px;
      font-size: 0.8rem;
      text-transform: capitalize;
    }
    .details {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.9);
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow-y: auto;
      padding: 2rem;
    }
    .details.active {
      display: flex;
    }
    .details-content {
      background: #1e1e1e;
      border-radius: 15px;
      padding: 1.5rem;
      width: 90%;
      max-width: 500px;
    }
    .close-btn {
      background: #ff5252;
      border: none;
      border-radius: 5px;
      padding: 0.5rem 1rem;
      color: white;
      cursor: pointer;
      margin-bottom: 1rem;
    }
    h2, h3 {
      text-align: center;
    }
    .recent {
      padding: 1rem;
      background: #1e1e1e;
    }
    .recent h3 {
      margin-bottom: 0.5rem;
    }
    .recent-list span {
      display: inline-block;
      background: #333;
      padding: 0.4rem 0.8rem;
      border-radius: 8px;
      margin: 0.2rem;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    <h1>Pokédex Exceeded – Kanto</h1>
    <input type="text" id="search" placeholder="Buscar Pokémon...">
  </header>

  <section class="pokedex" id="pokedex"></section>
  <section class="recent">
    <h3>Búsquedas recientes</h3>
    <div class="recent-list" id="recent-list"></div>
  </section>

  <div class="details" id="details">
    <div class="details-content" id="details-content">
      <button class="close-btn" onclick="closeDetails()">Cerrar</button>
      <div id="details-body"></div>
    </div>
  </div>
  <script>
const POKEMON_LIST = [
  {id:1, num:"#001", name:"Bulbasaur", types:["grass","poison"], sprite:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/1.png"},
  {id:2, num:"#002", name:"Ivysaur", types:["grass","poison"], sprite:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/2.png"},
  {id:3, num:"#003", name:"Venusaur", types:["grass","poison"], sprite:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/3.png"},
  {id:4, num:"#004", name:"Charmander", types:["fire"], sprite:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/4.png"},
  {id:5, num:"#005", name:"Charmeleon", types:["fire"], sprite:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/5.png"},
  {id:6, num:"#006", name:"Charizard", types:["fire","flying"], sprite:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/6.png"},
  {id:7, num:"#007", name:"Squirtle", types:["water"], sprite:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/7.png"},
  {id:8, num:"#008", name:"Wartortle", types:["water"], sprite:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/8.png"},
  {id:9, num:"#009", name:"Blastoise", types:["water"], sprite:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/9.png"},
  {id:25, num:"#025", name:"Pikachu", types:["electric"], sprite:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/25.png"}
];

const pokedexEl = document.getElementById("pokedex");
const searchInput = document.getElementById("search");
const recentListEl = document.getElementById("recent-list");
const detailsEl = document.getElementById("details");
const detailsBody = document.getElementById("details-body");

// Renderizar lista de Pokémon
function renderPokedex(list){
  pokedexEl.innerHTML = "";
  list.forEach(p => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <img src="${p.sprite}" alt="${p.name}" width="80">
      <h3>${p.num} ${p.name}</h3>
      <div class="types">${p.types.map(t=>`<span class="type">${t}</span>`).join('')}</div>
    `;
    card.onclick = () => showDetails(p.id);
    pokedexEl.appendChild(card);
  });
}

// Filtro de búsqueda
searchInput.addEventListener("input", ()=>{
  const term = searchInput.value.toLowerCase();
  const filtered = POKEMON_LIST.filter(p=>p.name.toLowerCase().includes(term) || p.num.includes(term));
  renderPokedex(filtered);
});

// Manejo de búsquedas recientes
function addRecent(id){
  let recent = JSON.parse(localStorage.getItem("recent")||"[]");
  recent = recent.filter(x=>x!==id);
  recent.unshift(id);
  if(recent.length>5) recent.pop();
  localStorage.setItem("recent", JSON.stringify(recent));
  renderRecent();
}

function renderRecent(){
  const recent = JSON.parse(localStorage.getItem("recent")||"[]");
  recentListEl.innerHTML = "";
  if(recent.length===0){
    recentListEl.innerHTML = "<span>No hay búsquedas recientes</span>";
    return;
  }
  recent.forEach(id=>{
    const p = POKEMON_LIST.find(x=>x.id===id);
    if(!p) return;
    const span = document.createElement("span");
    span.textContent = p.name;
    span.onclick = () => showDetails(p.id);
    recentListEl.appendChild(span);
  });
}

// Datos de detalle (movimientos, evoluciones, inates)
const DETAILS = {
  1: {evolution:{next:[{name:"Ivysaur",level:16}]}, level_up:[{level:1,move:"Tackle",type:"Normal",cat:"Physical",power:40,desc:"Ataque básico"}], inates:[{name:"Overgrow",desc:"Potencia movimientos Planta con HP bajo"}]},
  4: {evolution:{next:[{name:"Charmeleon",level:16}]}, level_up:[{level:1,move:"Scratch",type:"Normal",cat:"Physical",power:40,desc:"Rasguño"}, {level:9,move:"Ember",type:"Fire",cat:"Special",power:40,desc:"Llamarada menor"}], inates:[{name:"Blaze",desc:"Potencia movimientos Fuego con HP bajo"}]},
  25: {evolution:{previous:{name:"Pichu"},next:{name:"Raichu",requirement:"Piedra Trueno"}} , level_up:[{level:1,move:"Thunder Shock",type:"Electric",cat:"Special",power:40,desc:"Pequeña descarga eléctrica"}], inates:[{name:"Static",desc:"Puede paralizar al atacante que haga contacto"}]}
};

// Mostrar detalles
function showDetails(id){
  addRecent(id);
  const p = POKEMON_LIST.find(x=>x.id===id);
  const d = DETAILS[id];
  let html = `<h2>${p.name} ${p.num}</h2>`;
  html += `<div class="types">${p.types.map(t=>`<span class="type">${t}</span>`).join('')}</div>`;
  if(d.evolution){
    html += "<h3>Evoluciones</h3>";
    if(d.evolution.previous) html += `<p>Prev: ${d.evolution.previous.name}</p>`;
    if(d.evolution.next){
      const nexts = Array.isArray(d.evolution.next)?d.evolution.next:[d.evolution.next];
      nexts.forEach(n=> html += `<p>Next: ${n.name}${n.level?(" — Nivel "+n.level):""}${n.requirement?(" — "+n.requirement):""}</p>`);
    }
  }
  if(d.inates && d.inates.length){
    html += "<h3>Inates</h3>";
    d.inates.forEach(i=> html += `<p><strong>${i.name}:</strong> ${i.desc}</p>`);
  }
  if(d.level_up && d.level_up.length){
    html += "<h3>Movimientos por nivel</h3>";
    d.level_up.forEach(m=> html += `<p>Nivel ${m.level}: ${m.move} (${m.type}, ${m.cat}, ${m.power}) — ${m.desc}</p>`);
  }
  detailsBody.innerHTML = html;
  detailsEl.classList.add("active");
}

function closeDetails(){ detailsEl.classList.remove("active"); }

// Inicializar
renderPokedex(POKEMON_LIST);
renderRecent();
  </script>

